<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/public/css/bootstrap.css" />
    <link rel="stylesheet" href="/public/css/style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <script src="/controllers/sesionCtrl.js"></script>
    <script src="/socket.io/socket.io.js"></script>
</head>
<%- include("layout.html"); %>
<body ng-app="sesion" ng-controller="sesionCtrl">
    <div class="col-md-4 col-md-offset-4">
        <h2 class="page-header">Coloca tu nombre de invitado.</h2>
        <% if (creador) {%>
            <form method="post" action="/sesion/mod/iniciando/<%= idSesionEnc %>/<%= emailInvEnc %>">
                <div class="form-group">
                    <label>username</label>
                    <input id= "text1" name="username" type="text" class="form-control" placeholder="Username">
                </div>
                <button name="submit" type="submit" class="btn btn-default">submit</button>
            </form>
        <% } else { %>
            <form method="post" action="/sesion/part/iniciando/<%= idSesionEnc %>/<%= emailInvEnc %>">
                <div class="form-group">
                    <label>username</label>
                    <input id= "text2" name="username" type="text" class="form-control" placeholder="Username">
                </div>
                <button name="submit" type="submit" class="btn btn-default">Comenzar sesi√≥n</button>
            </form>
        <% } %>
    </div>
</body>
</html>

<script>
    var creador = "<%= creador %>";
    var socket = io.connect(window.location.host);
    var submits = document.getElementsByName("submit");
    for (var i = 0; i < submits.length; i++)
    {
        submits[i].addEventListener('click',function(){
            if (creador == "true")
                socket.emit('online', {
                        username: document.getElementById("text1").value
        });
            if (creador == "false")
                socket.emit('online', {
                    username: document.getElementById("text2").value
                });
            });
    }



                </script>